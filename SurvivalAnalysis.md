# 生存分析（Survival Analysis）
- イベントが発生するまでの時間を予測

## 1. 基本的な概念

- **生存時間（Survival Time）**  
  - 特定の出来事（例えば、患者の死亡、機械の故障など）が発生するまでの時間を指す。

- **イベント（Event）**  
  - 生存分析では、観察対象となる「出来事」のことを指す。例えば、患者の死亡、病気の発症、機械の故障など。

- **右検閲（Right Censoring）**  
  - 生存分析でよく見られるデータの形式で、イベントが観察期間中に発生しない場合、データは「右検閲」と呼ばれ、イベントが発生した時間はわからないが、少なくともその時点まで生存していたことがわかる。

- **生存関数（Survival Function）**  
  - ある時点で「生存している確率」を示す関数。一般的にはS(t)で表され、時間tにおいてまだイベントが発生していない確率を示す。

- **ハザード関数（Hazard Function）**  
  - ある時点で「イベントが発生する瞬間のリスク」の確率を示す関数。リスク（または危険度）としても表され、時間tにおけるイベントが発生する危険度を示す。

- **累積ハザード関数（Cumulative Hazard Function）**  
  - 時間が経過するにつれて累積されるリスクを示す関数。時間tまでの累積的な危険度を示す。

## 2. 生存分析の主要な手法

### **非パラメトリック法（Non-Parametric Methods）**

- **カプラン-マイヤー法（Kaplan-Meier Estimator）**  
  - 生存関数を推定するための方法で、観察された生存時間に基づいて生存確率を計算する。右検閲を扱うことができる。
  
- **ログランク検定（Log-Rank Test）**  
  - 2つ以上のグループ間での生存関数の差異を検定するための方法。生存曲線が有意に異なるかを判断する。

### **半パラメトリック法（Semi-Parametric Methods）**

- **コックス回帰（Cox Proportional Hazards Model）**  
  - ハザード関数に基づく回帰モデルで、説明変数（共変量）が生存時間に与える影響を分析する。特に、共変量の影響を比例ハザードの仮定の下で評価する。

- **コックスの回帰モデル（Cox Model）**  
  - コックス回帰は、サバイバル分析において共変量の影響を調べるために広く使用される。

### **パラメトリック法（Parametric Methods）**

- **指数分布（Exponential Distribution）**  
  - ハザード関数が一定であると仮定した場合に使用される。イベントの発生が「記憶無」だと仮定する。

- **ワイブル分布（Weibull Distribution）**  
  - ハザード関数が時間と共に変化する場合を扱う。イベントの発生リスクが時間と共に増加または減少することを示す。

- **ログ-ログ正規分布（Log-Logistic Distribution）**  
  - 生存時間の分布としてログ-ログ正規分布を使用する場合。特に、ハザード関数が増加してから減少する場合に使用される。

- **ガンマ分布（Gamma Distribution）**  
  - イベントが発生するまでの時間がガンマ分布に従う場合に使用。

### **その他の手法**

- **フレイルモデル（Frailty Models）**  
  - 無作為効果を考慮したモデルで、個々の被験者に固有のリスク（フレイル）を加味する。

- **競合リスクモデル（Competing Risks Model）**  
  - 1つの生存時間に複数の競合するリスク（異なるタイプのイベント）が存在する場合に使用される。

## 3. 生存分析の応用

- **医療分野**  
  - 患者の生存期間や再発までの時間を予測する。特定の治療法が患者の生存に与える影響を評価する。

- **製造業や保守業務**  
  - 機械や設備が故障するまでの時間を予測する。機器の故障リスクを管理する。

- **社会学や経済学**  
  - 失業期間や退職後の生存時間などを分析する。社会的要因や経済的要因が生存に与える影響を調査。

- **マーケティング**  
  - 顧客が製品やサービスを購入し続ける期間を予測する。顧客の離脱（Churn）予測に使用される。

## 4. 利用が特定される状況の例

- **カプラン-マイヤー法**: イベントが発生するまでの生存時間の分布を推定したい場合に有用。
- **コックス回帰モデル**: 共変量（年齢、性別、治療法など）が生存に与える影響を評価する場合に使用。
- **ログランク検定**: 複数のグループ間で生存曲線に有意な差があるかを確認したい場合に有用。
- **競合リスクモデル**: 複数の異なるリスク（例えば、病気の再発と死亡）を同時に扱う必要がある場合に使用。
